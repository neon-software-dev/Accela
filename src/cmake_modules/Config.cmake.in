include(CMakeFindDependencyMacro)

# Compute the installation prefix relative to this file.
get_filename_component(_IMPORT_PREFIX "${CMAKE_CURRENT_LIST_FILE}" PATH)
get_filename_component(_IMPORT_PREFIX "${_IMPORT_PREFIX}" PATH)
get_filename_component(_IMPORT_PREFIX "${_IMPORT_PREFIX}" PATH)
get_filename_component(_IMPORT_PREFIX "${_IMPORT_PREFIX}" PATH)
if(_IMPORT_PREFIX STREQUAL "/")
  set(_IMPORT_PREFIX "")
endif()

set(ACCELA_INSTALL_LIB_DIR "${_IMPORT_PREFIX}/lib")

#########

find_dependency(glm CONFIG REQUIRED)
find_dependency(EnTT CONFIG REQUIRED)
find_dependency(AudioFile CONFIG REQUIRED)
find_dependency(assimp CONFIG REQUIRED)
find_dependency(nlohmann_json CONFIG REQUIRED)
find_dependency(Vulkan REQUIRED)
find_dependency(VulkanMemoryAllocator CONFIG REQUIRED)
find_dependency(SDL2 CONFIG REQUIRED)
find_dependency(SDL2_image CONFIG REQUIRED)
find_dependency(SDL2_ttf CONFIG REQUIRED)
find_dependency(OpenVR REQUIRED)
find_dependency(unofficial-spirv-reflect CONFIG REQUIRED)
find_dependency(Qt6 REQUIRED COMPONENTS Widgets Gui)

find_library(PhysXCharacterKinematicFile PhysXCharacterKinematic_static_64 HINTS "${ACCELA_INSTALL_LIB_DIR}" REQUIRED)
add_library(PhysXCharacterKinematic IMPORTED STATIC)
set_target_properties(PhysXCharacterKinematic PROPERTIES
    IMPORTED_LOCATION "${PhysXCharacterKinematicFile}"
)

find_library(PhysXCookingFile PhysXCooking_static_64 HINTS "${ACCELA_INSTALL_LIB_DIR}" REQUIRED)
add_library(PhysXCooking IMPORTED STATIC)
set_target_properties(PhysXCooking PROPERTIES
    IMPORTED_LOCATION "${PhysXCookingFile}"
)

find_library(PhysXExtensionsFile PhysXExtensions_static_64 HINTS "${ACCELA_INSTALL_LIB_DIR}" REQUIRED)
add_library(PhysXExtensions IMPORTED STATIC)
set_target_properties(PhysXExtensions PROPERTIES
    IMPORTED_LOCATION "${PhysXExtensionsFile}"
)

find_library(PhysXFile PhysX_static_64 HINTS "${ACCELA_INSTALL_LIB_DIR}" REQUIRED)
add_library(PhysX IMPORTED STATIC)
set_target_properties(PhysX PROPERTIES
    IMPORTED_LOCATION "${PhysXFile}"
)

find_library(PhysXPvdSDKFile PhysXPvdSDK_static_64 HINTS "${ACCELA_INSTALL_LIB_DIR}" REQUIRED)
add_library(PhysXPvdSDK IMPORTED STATIC)
set_target_properties(PhysXPvdSDK PROPERTIES
    IMPORTED_LOCATION "${PhysXPvdSDKFile}"
)

find_library(PhysXCommonFile PhysXCommon_static_64 HINTS "${ACCELA_INSTALL_LIB_DIR}" REQUIRED)
add_library(PhysXCommon IMPORTED STATIC)
set_target_properties(PhysXCommon PROPERTIES
    IMPORTED_LOCATION "${PhysXCommonFile}"
)

find_library(PhysXFoundationFile PhysXFoundation_static_64 HINTS "${ACCELA_INSTALL_LIB_DIR}" REQUIRED)
add_library(PhysXFoundation IMPORTED STATIC)
set_target_properties(PhysXFoundation PROPERTIES
    IMPORTED_LOCATION "${PhysXFoundationFile}"
)

find_library(PhysXGpuFile PhysXGpu_64 HINTS "${ACCELA_INSTALL_LIB_DIR}")
add_library(PhysXGpu IMPORTED SHARED)
set_target_properties(PhysXGpu PROPERTIES
        IMPORTED_LOCATION "${PhysXGpuFile}"
        IMPORTED_IMPLIB "${PhysXGpuFile}"
)

include("${CMAKE_CURRENT_LIST_DIR}/AccelaTargets.cmake")
